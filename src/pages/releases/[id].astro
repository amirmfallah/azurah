---
import Layout from "../../layouts/Layout.astro";
import Navigation from "../../components/Navigation.astro";
import Footer from "../../components/Footer.astro";
import { releases } from "../../data/releases";

export function getStaticPaths() {
  return releases.map((release) => ({
    params: { id: release.id },
    props: { release },
  }));
}

const { release } = Astro.props;
---

<Layout>
  <main class="min-h-screen uppercase bg-black text-white">
    <Navigation />

    <!-- Release Detail -->
    <section class="flex items-center justify-center px-4 md:px-8 pt-32 md:pt-40 pb-16 md:pb-32">
      <div class="w-full max-w-[2000px]">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-20">
          <!-- Image -->
          <div class="aspect-square bg-black overflow-hidden">
            <img src={release.image} alt={release.title} class="w-full h-full object-cover" />
          </div>

          <!-- Info -->
          <div class="flex flex-col justify-center">
            <div class="text-xs tracking-widest opacity-50 mb-4">{release.catalogNumber}</div>
            <h1 class="hero-text mb-6 md:mb-8">{release.title}</h1>
            <div class="text-xl md:text-2xl font-black mb-8 md:mb-12 tracking-tight">{release.artist}</div>

            <div class="border-t border-white opacity-20 mb-8"></div>

            <div class="space-y-6 mb-8 md:mb-12">
              <div>
                <div class="text-xs tracking-widest opacity-50 mb-2">Release Date</div>
                <div class="text-sm md:text-base tracking-wide">{new Date(release.releaseDate).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</div>
              </div>

              {release.description && (
                <div>
                  <div class="text-xs tracking-widest opacity-50 mb-2">Description</div>
                  <div class="text-sm md:text-base tracking-wide">{release.description}</div>
                </div>
              )}

              {release.tracks && release.tracks.length > 0 && (
                <div>
                  <div class="text-xs tracking-widest opacity-50 mb-3">Tracklist</div>
                  <ol class="space-y-2">
                    {release.tracks.map((track, index) => (
                      <li class="text-sm md:text-base tracking-wide">
                        {index + 1}. {track}
                      </li>
                    ))}
                  </ol>
                </div>
              )}
            </div>

            <div class="border-t border-white opacity-20 mb-8"></div>

            <div class="flex flex-wrap gap-6 md:gap-8 text-xs tracking-widest">
              {release.spotifyUrl && (
                <a href={release.spotifyUrl} class="hover:underline">Spotify</a>
              )}
              {release.soundcloudUrl && (
                <a href={release.soundcloudUrl} class="hover:underline">Soundcloud</a>
              )}
              <a href="/releases" class="hover:underline opacity-50">Back to Releases</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <Footer />
  </main>
</Layout>
